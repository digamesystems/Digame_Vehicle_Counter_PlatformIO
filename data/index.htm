<!DOCTYPE HTML><html>
<head> 
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="style.css">
  <!--link rel="shortcut icon" href="favicon.ico"/-->
  <!--link rel="icon"  type="image/ico" href="favicon.ico"-->
  <title>%config.deviceName% - (counter)</title>
</head>

<body>

    <h1>D&#237game Systems<br>Settings</h1><br>
    <hr>
    <h2>LIDAR-WiFi COUNTER <br><em> %config.deviceName% </em></h2>
    
    <form>
      <p>Welcome. You can use these forms to update system parameters for this LIDAR vehicle counter.</p>
    </form>
    <br>

    <form action="/test">
      <H3>Real-Time Testing</H3>
      <br>
      <br>
      <br>
      <div class="center">
        <input type="submit" value="Start Test">
      </div>
      <br>
    </form>

    <!--div class="center">
      <a href='/test' onclick="stopTimer" class="button">Test Mode</a>
    </div-->

    
    <!--form action="/counterreset">
      <h3>Counter Value</h3>

      <input type="hidden" id="counterval" name="counterval" value=%config.lidarZone1Count%><br>
      <h1><span id="vehiclecount">%config.lidarZone1Count% </span> </h1>
      <input type="hidden" id="counterval2" name="counterval2" value=%config.lidarZone1Count%><br><br>
      <div class="center">
        <input type="submit" value="Clear Counter">
      </div>
    </form>

    <form>
      <h3>Measured Distance (cm)</h3>
      <br>
      <h1><span id="distance">%DISTANCE%</span></h1>
      <br>
      <div id="chart-distance" class="container"></div>
    </form-->

  <form action="/lidarparams">
    <H3>Counter Parameters</H3><br>
    <label >Counter #</label>
    <input type="number" min="1" max="4" id="counterid" name="counterid" value=%config.counterID%><br><br>    
    <label >Counter Population</label>
    <input type="number" min="1" max="4" id="counterpopulation" name="counterpopulation" value=%config.counterPopulation%><br><br>
    <label >Det. Thresh. (1-100&#37;)</label>
    <input type="number" min="1" max="100" id="residencetime" name="residencetime" value=%config.lidarResidenceTime%><br><br>
    <label >Lane 1 Min (cm)</label>
    <input type="number" min="0" max="999" id="zone1min" name="zone1min" value=%config.lidarZone1Min%><br><br>
    <label >Lane 1 Max (cm)</label>
    <input type="number" min="0" max="999" id="zone1max" name="zone1max" value=%config.lidarZone1Max%><br><br>
    <label >Lane 2 Min (cm)</label>
    <input type="number" min="0" max="999" id="zone2min" name="zone2min" value=%config.lidarZone2Min%><br><br>
    <label >Lane 2 Max (cm)</label>
    <input type="number" min="0" max="999" id="zone2max" name="zone2max" value=%config.lidarZone2Max%><br><br>
    <br>
    <div class="center">
        <input type="submit" value="Submit">
    </div>    
  </form>


  <script>
    function myFunction() {
      alert("Log File Cleared.");
    }
  </script>

    <form action="/generalparams">
        <H3>General</H3><br>
        <label for="devname">Device Name</label>
        <input type="text" id="devname" name="devname" value="%config.deviceName%"><br>

        <br><label>Model</label>
        <br><small><em>%MODEL%</em><br>%MODEL_DESCRIPTION%</small><br>
        
        <br><label>Software Version<br></label><br>
        <small>%SW_VERSION%</small><br>

        <br><label>File System Version</label><br>
        <small>%SW_VERSION%</small><br>
        
        <!--br><label>Uptime (DDD:HH:MM:SS)<br></label><br>
        <small><span id="uptime">UPTIME</span></small-->
      
        
        <br><label for="streaming">USB Streaming</label>
        <div><br>
          <input type="radio" id="true" name="streaming" value="ON" %STREAMING_ON%>            
          <label for="true"><small>ON</small></label><br>
        
          <input type="radio" id="false" name="streaming" value="OFF" %STREAMING_OFF%>
          <label for="false"><small>OFF</small></label><br>
        </div>

        <br><label>Logging to SD Card</label>
        <div><br>
          <label for="logbootevents"><small>Reboot Events</small></label>
          <input type="checkbox" id="logbootevents" name="logbootevents" value="checked" %config.logBootEvents%><br>
          
          <label for="logheartbeatevents"><small>Heartbeat Events</small></label>
          <input type="checkbox" id="logheartbeatevents" name="logheartbeatevents" value="checked" %config.logHeartBeatEvents%><br>
          
          <label for="logvehicleevents"><small>Vehicle Events</small></label>
          <input type="checkbox" id="logvehicleevents" name="logvehicleevents" value="checked" %config.logVehicleEvents%><br>

          <label for="loglidarevents"><small>Raw LIDAR Data</small></label>
          <input type="checkbox" id="loglidarevents" name="loglidarevents" value="checked" %config.logLidarEvents%><br>
          
          <label for="logdebugevents"><small>Debug Messages</small></label>
          <input type="checkbox" id="logdebugevents" name="logdebugevents" value="checked" %config.logDebugEvents%><br>
          
          <br>
          
        </div>

        <br><br>
        <div class="center">
          <a href='/eventlog' class="button">Download Log File</a>
        </div> 
        <br>
        <br>
        <div class="center">
          <a href='/cleareventlog' class="button" onclick="myFunction()">Clear Log File</a>
        </div>

        <br><label for="reboot">Reboot</label>
        <input type="checkbox" id="reboot" name="reboot" value="true"><p><br></p>

        <br>
        <br>
        <div class="center">
        <input type="submit" value="Submit">
        </div>
    </form>


    <form action="/networkparams">
        <H3>Network</H3>
        <p><em>NOTE: Changes to network settings will be applied after a reboot of the device.</em></p>
        <label>MAC Address</label><p><small><em>%MAC_ADDRESS%</em></small></p><br>
        
        <label for="ssid">Heartbeat Int'val (sec)</label>
        <input type="number" min="10" max="65534" id="heartbeatinterval" name="heartbeatinterval" value=%config.heartbeatInterval%><br><br>            

        <label for="ssid">SSID</label>
        <input type="text" id="ssid" name="ssid" value="%config.ssid%"><br><br>

        <label for="password">Password</label>
        <input type="password" id="password" name="password" value="%config.password%"><br><br>

        <label for="serverurl">Server URL</label>
        <input type="text" id="serverurl" name="serverurl" size="40" value="%config.serverURL%"><br><br>
        
        <br>
        <div class="center">
          <input type="submit" value="Submit">
        </div>
    </form>

    <!--form action="/loraparams">
        <H3>LoRa<br><small>(Low-Power Long-Range Wireless Link)</small></H3>
        <p><em>Strategies for optimizing the parameters for LoRa communication may be found in the product manual. Both the counters and the base station must use the same RF parameters for communication to be successful.</em></p>
        <label for="basestationaddress">Base Station Address</label>
        <input type="number" min="1" max="65534" id="basestationaddress" name="basestationaddress" value=%config.loraBaseStationAddress%><br><br>
        <label for="address">Counter Address</label>
        <input type="number" min="10" max="65534" id="address" name="address" value=%config.loraAddress%><br><br>            
        <label for="networkid">Network ID</label>
        <input type="number" min="0" max="16" id="networkid" name="networkid" value=%config.loraNetworkID%><br><br>
        <label for="band">Band</label>
        <input type="number" min="850000000" max="950000000" id="band" name="band" value=%config.loraBand%><br><br>
        <label for="spreadingfactor">Spreading Factor</label>
        <input type="number" min="7" max="12" id="spreadingfactor" name="spreadingfactor" value=%config.loraSF%><br><br>
        <label for="bandwidth">Bandwidth</label>
        <input type="number" min="0" max="9" id="bandwidth" name="bandwidth" value=%config.loraBW% ><br><br>
        <label for="codingrate">Coding Rate</label>
        <input type="number" min="1" max="4" id="codingrate" name="codingrate" value=%config.loraCR% ><br><br>
        <label for="preamble">Preamble</label>
        <input type="number" min="4" max="7" id="preamble" name="preamble" value=%config.loraPreamble% ><br><br>
        <br>
        <div class="center">
            <input type="submit" value="Submit">
        </div>
    </form-->

    <hr>
    <!--img src="/Digame_Logo_Full_Color.png" alt="Digame Logo"-->
    <p style="text-align:center; font-style:italic ">Copyright 2023, D&#237game Systems. All rights reserved.</p>
  
    
    
  <!--script>
    setInterval(myTimer, 100);
   
    function myTimer() {
      const d = new Date();
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          items = this.responseText.split(','); 
          dist = parseFloat(items[0]);
          count = parseFloat(items[1]);
          document.getElementById("distance").innerHTML = dist;
          document.getElementById("vehiclecount").innerHTML = count;  
        };}
      xhttp.open("GET", "/distance", true);
      xhttp.send();
    }
  </script-->
  
  <!--script>

    timerActive = false; 
    let timerID; 

    window.onload = (event) => {
        console.log("**** page is fully loaded ****");
        timerActive = true;
        timerID = setInterval(mySecTimer, 1000);
    };

    function stopTimer() {
      timerActive = false;
      clearInterval(timerID);
    }

    function mySecTimer(){
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          uptime = this.responseText;//.split(','); 
          //uptime = parseFloat(items[0]);
          document.getElementById("uptime").innerHTML = uptime;  
        };}
      xhttp.open("GET", "/uptime", true);
      xhttp.send();
    }
   
  </script-->

</body>

</html>